bits 32 ; target processor mode

; import fucntion 
extern puts

section .text	; text section containing code
global main	; int main ... (not static or private in OOP)
main:
	push ebp
	mov ebp, esp
	sub esp, 0x100
	push welcome
	call puts

	; memset
	xor eax, eax
	mov ecx, 0x21
	lea edi, [ebp - 0x30]
	rep stosb

	; using syscall read
	lea ecx, [ebp - 0x30]	; buf
	mov edx, 0x21	; 0x20 + newline
	mov ebx, 0	; stdin
	mov eax, 0x3
	int 0x80

	; print	
	lea eax, [ebp - 0x30]
	mov BYTE[eax + 0x20],0	; set null
	push eax
	call puts
	
	add esp, 0x100
	leave
	ret

section .rodata
welcome: db "--- echo challenge ---",0
