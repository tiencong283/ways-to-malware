#include <stdio.h>
#include <string.h>
#include <stdlib.h>


#define BUF_SIZE 100

int readInt(char const* prompt, char const* errMsg, int* result){
	char input[BUF_SIZE + 1];
	long int num;
	char* endptr;
	while(1){
		printf(prompt);
		fgets(input, BUF_SIZE + 1, stdin);
		input[strlen(input) - 1] = '\x00';
		num = strtol(input, &endptr, 10);
		if (*endptr != NULL){
			puts(errMsg);
			continue;
		}
		break;
	}
	*result = num;
	return num;
}
int main(){
	char const* options = "1.Add\n2.Sub\n3.Mul\n4.Div";
	puts("--- # challenge 11 simple calculator ---");
	puts("--- features ---");
	puts(options);
	puts("------");
	while(1){
		int userChoice;
		readInt("Enter your choice: ", "Please enter a number in range [1-4]", &userChoice);
		if (userChoice < 1 || userChoice > 4){
			puts("Please enter a number in range [1-4]");
			continue;
		}
		int num1;	// operand 1
		int num2;	// operand 2
		double ans;	// answer
		char operand = NULL;

		readInt("Enter operand 1: ", "Please enter a valid int number", &num1);
		readInt("Enter operand 2: ", "Please enter a valid int number", &num2);
		
		switch(userChoice){
			case 1:
				ans = num1 + num2;
				operand = '+';
				break;
			case 2:
				ans = num1 - num2;
				operand = '-';
				break;
			case 3:
				ans = num1*num2;
				operand = 'x';
				break;
			case 4:
				ans = num1*1.0/num2;
				operand = '/';
		}
		printf("%d %c %d = %.2lf\n", num1,  operand, num2, ans);
	}
	return 0;
}
