//#include <Windows.h>
//#include "resource.h"
//#include <time.h>
//#include <cstdio>
//
//int delta = 2;
//struct ballInfoStruct {
//	int x;	// x coordinate
//	int y;	// y coordinate
//	int dx;	// x delta
//	int dy;	// y delta
//	int width;	// width of the ball
//	int height;	// height of the ball
//} ballInfo;
//
////const char userWndClassName[] = "ForTextReverseWndClass";
//const char g_szClassName[] = "myWindowClass";
//HBITMAP hbmBall = NULL;
//int frameFrqTimer = 0;
//int frameFrq = 5; // miliseconds/one frame 
//
//void updateBallInfo(RECT* clientRecP) {
//
//	ballInfo.x += ballInfo.dx;
//	ballInfo.y += ballInfo.dy;
//
//	if (ballInfo.x <= 0 || ballInfo.x >= clientRecP ->right - ballInfo.width) {
//		ballInfo.dx *= -1;
//	}
//	if (ballInfo.y <= 0 || ballInfo.y >= clientRecP ->bottom - ballInfo.height) {
//		ballInfo.dy *= -1;
//	}
//}
//
//void drawBall(RECT* clientRecP, HDC hdc) {
//	FillRect(hdc, clientRecP, CreateSolidBrush(RGB(255, 255, 255))); // white all client area
//
//	HDC hdcMem = CreateCompatibleDC(hdc);
//	if (hdcMem == NULL) {
//		return;
//	}
//	HGDIOBJ hbmOld = SelectObject(hdcMem, hbmBall);
//	BitBlt(hdc, ballInfo.x, ballInfo.y, ballInfo.width, ballInfo.height, hdcMem, 0, 0, SRCCOPY);
//
//	SelectObject(hdcMem, hbmOld);
//	DeleteDC(hdcMem);
//}
//
//LRESULT CALLBACK WindowProc(HWND hwnd, UINT uMsg, WPARAM wParam, LPARAM lParam) {
//	switch (uMsg){
//	case WM_CREATE:
//	{
//		BITMAP bm;
//		RECT clientRec;
//		hbmBall = LoadBitmap(GetModuleHandle(NULL), MAKEINTRESOURCE(IDB_BITMAP_BALL));
//		if (hbmBall == NULL) {
//			break;
//		}
//		if (!GetClientRect(hwnd, &clientRec)) { // client area
//			break;
//		}
//		GetObject(hbmBall, sizeof(bm), &bm);
//		srand((unsigned)time(NULL));
//
//		// initialize ballInfo
//		memset(&ballInfo, 0, sizeof(ballInfo));
//
//		int rx = rand();
//		int ry = rand();
//		ballInfo.x = rx % (clientRec.right -  ballInfo.width);
//		ballInfo.y = ry % (clientRec.bottom - ballInfo.height);
//		ballInfo.width = bm.bmWidth;
//		ballInfo.height = bm.bmHeight;
//		rx = rx & 1 == 1 ? 1 : -1;
//		ry = ry & 1 == 1 ? 1 : -1;
//		ballInfo.dx = rx*delta;
//		ballInfo.dy = ry*delta;
//
//		// set timers
//		frameFrqTimer = SetTimer(hwnd, NULL, frameFrq, NULL);	// no timer callback
//		break;
//	}
//	case WM_PAINT:
//	{
//		PAINTSTRUCT ps;
//		HDC hdc = BeginPaint(hwnd, &ps);
//		drawBall(&ps.rcPaint, hdc);
//
//		EndPaint(hwnd, &ps);
//		break;
//	}
//	case WM_TIMER:
//	{
//		HDC hdc = GetDC(hwnd);
//		RECT clientRec;
//		if (!GetClientRect(hwnd, &clientRec)) {
//			break;
//		}
//		updateBallInfo(&clientRec);
//		drawBall(&clientRec, hdc);
//
//		break;
//	}
//	case WM_CLOSE:
//	{
//		DeleteObject(hbmBall);
//		KillTimer(hwnd, frameFrqTimer);
//		DestroyWindow(hwnd);
//		break;
//	}
//	case WM_DESTROY:
//	{
//		PostQuitMessage(0);
//		break;
//	}
//	default:
//		return DefWindowProc(hwnd, uMsg, wParam, lParam);
//	}
//	return 0;
//}
//
//int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int nCmdShow) {
//
//	// Register the window class.
//	WNDCLASS wc = { };
//
//	wc.lpfnWndProc = WindowProc;
//	wc.hInstance = hInstance;
//	wc.lpszClassName = g_szClassName;
//
//	if (!RegisterClass(&wc)) {
//		MessageBox(NULL, "Cannot register the window class", "ERROR", MB_OK | MB_ICONERROR);
//		return EXIT_FAILURE;
//	}
//
//	HWND hwnd = CreateWindowEx(
//		0,                              // Optional window styles.
//		g_szClassName,                     // Window class
//		"ASM #14 - Boucing Ball",    // Window text
//		WS_OVERLAPPEDWINDOW,            // Window style
//
//		// Size and position
//		CW_USEDEFAULT, CW_USEDEFAULT, 320, 240,
//		
//		NULL,       // Parent window    
//		NULL,       // Menu
//		hInstance,  // Instance handle
//		NULL        // Additional application data
//	);
//	ShowWindow(hwnd, nCmdShow);
//
//	// Correct.
//
//	MSG msg = { };
//	while (GetMessage(&msg, NULL, 0, 0))
//	{
//		TranslateMessage(&msg);
//		DispatchMessage(&msg);
//	}
//
//	return EXIT_SUCCESS;
//}